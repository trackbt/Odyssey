(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{209:function(e){e.exports={title:"Bill of Lading",description:"Your premium will be calculated from cargo description",type:"object",required:["sender"],definitions:{Address:{type:"object",properties:{name:{type:"string",default:""},address:{type:"string",default:""},country:{type:"string",default:""}}},CargoCategory:{type:"string",enum:["Car","Cargo","Ship","Plant","Plane","Transport"]},Country:{type:"string",enum:["Austria","Belgium","Bulgaria","Croatia","Cyprus","Czech Republic","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Ireland","Italy","Latvia","Luxembourg","Lithuania","Malta","Netherlands","Poland","Portugal","Romania","Slovak Republic","Slovenia","Spain","Sweden","United Kingdom"]},Package:{type:"object",properties:{goodsId:{type:"string",title:"Identifier",default:"package-F488PS"},type:{title:"Type",default:"Car",$ref:"#/definitions/CargoCategory"},description:{type:"string",title:"Description",default:"2018 Ferrari 488 Pista Spider WH"},value:{type:"number",title:"Value (EUR)",default:32e4},quantity:{type:"number",title:"Quantity (pcs)",default:1},weight:{type:"number",title:"Weight (kg)",default:1380}}}},properties:{sender:{type:"string",title:"Consigner / Sender",default:"DHL International GmbH"}}}},210:function(e){e.exports={"ui:field":"layout","ui:layout":[{sender:{md:6},fromCountry:{md:6},fromPlace:{md:12}},{receiver:{md:6},toCountry:{md:6},toPlace:{md:12}},{goods:12}],sender:{"ui:autofocus":!0,"ui:emptyValue":""},receiver:{"ui:emptyValue":""},fromCountry:{"ui:emptyValue":""},fromPlace:{"ui:emptyValue":""},toCountry:{"ui:emptyValue":""},toPlace:{"ui:emptyValue":""},goods:{items:{classNames:"goods-items-list","ui:emptyValue":"","ui:options":{removable:!0,addable:!0,orderable:!0}}}}},213:function(e,t,n){e.exports=n(501)},218:function(e,t,n){},219:function(e,t,n){},348:function(e,t,n){},501:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(23),r=n.n(i),l=(n(218),n(37)),c=n(38),s=n(40),u=n(39),m=n(41),p=(n(219),n(53)),d=n(200),h=n.n(d),g=n(201),f=n.n(g),b=n(28),y=n.n(b),E=n(203),v=n.n(E),C=n(205),S=n.n(C),N=n(68),w=n.n(N),P=n(54),k=n.n(P),O=n(123),T=n.n(O),A=n(67),R=n(207),I=n(202),M=n.n(I),j=n(204),_=n.n(j),L=n(126),x=n.n(L),U=n(124),F=n.n(U),B=n(125),D=n.n(B),V=n(206),z=n.n(V),G=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleMenuSelected=function(e){switch(e){case"INSURE":break;default:n.handleMenuSelected("INSURE")}},n.handleUserChange=function(){},n.handleProfileMenuOpen=function(e){n.setState({anchorEl:e.currentTarget})},n.handleMenuClose=function(){n.setState({anchorEl:null}),n.handleMobileMenuClose()},n.handleMobileMenuOpen=function(e){n.setState({mobileMoreAnchorEl:e.currentTarget})},n.handleMobileMenuClose=function(){n.setState({mobileMoreAnchorEl:null})},console.log(e),n.state={anchorEl:null,mobileMoreAnchorEl:null,userName:e.userName,onUserChange:e.onUserChange,onMenuSelected:e.onUiStateChange},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state,t=e.anchorEl,n=e.mobileMoreAnchorEl,a=this.props.classes,i=Boolean(t),r=Boolean(n),l=o.a.createElement(T.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:this.handleMenuClose},o.a.createElement(k.a,{onClick:this.handleMenuClose},"Profile"),o.a.createElement(k.a,{onClick:this.handleMenuClose},"My account")),c=o.a.createElement(T.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:r,onClose:this.handleMenuClose},o.a.createElement(k.a,{onClick:this.handleMobileMenuClose},o.a.createElement(y.a,{color:"inherit"},o.a.createElement(w.a,{badgeContent:4,color:"secondary"},o.a.createElement(F.a,null))),o.a.createElement("p",null,"Messages")),o.a.createElement(k.a,{onClick:this.handleMobileMenuClose},o.a.createElement(y.a,{color:"inherit"},o.a.createElement(w.a,{badgeContent:11,color:"secondary"},o.a.createElement(D.a,null))),o.a.createElement("p",null,"Notifications")),o.a.createElement(k.a,{onClick:this.handleProfileMenuOpen},o.a.createElement(y.a,{color:"inherit"},o.a.createElement(x.a,null)),o.a.createElement("p",null,"Profile")));return o.a.createElement("div",{className:a.root},o.a.createElement(h.a,{position:"static"},o.a.createElement(f.a,null,o.a.createElement(y.a,{className:a.menuButton,color:"inherit","aria-label":"Open drawer"},o.a.createElement(M.a,null)),o.a.createElement(v.a,{className:a.title,variant:"h6",color:"inherit",noWrap:!0},"Insurance Dashboard"),o.a.createElement("div",{className:a.search},o.a.createElement("div",{className:a.searchIcon},o.a.createElement(_.a,null)),o.a.createElement(S.a,{placeholder:"Search\u2026",classes:{root:a.inputRoot,input:a.inputInput}})),o.a.createElement("div",{className:a.grow}),o.a.createElement("div",{className:a.sectionDesktop},o.a.createElement(y.a,{color:"inherit"},o.a.createElement(w.a,{badgeContent:4,color:"secondary"},o.a.createElement(F.a,null))),o.a.createElement(y.a,{color:"inherit"},o.a.createElement(w.a,{badgeContent:17,color:"secondary"},o.a.createElement(D.a,null))),o.a.createElement(y.a,{"aria-owns":i?"material-appbar":void 0,"aria-haspopup":"true",onClick:this.handleProfileMenuOpen,color:"inherit"},o.a.createElement(x.a,null))),o.a.createElement("div",{className:a.sectionMobile},o.a.createElement(y.a,{"aria-haspopup":"true",onClick:this.handleMobileMenuOpen,color:"inherit"},o.a.createElement(z.a,null))))),l,c)}}]),t}(o.a.Component),W=Object(R.withStyles)(function(e){return{root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(p.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(p.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(A.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(A.fade)(e.palette.common.white,.25)},marginRight:2*e.spacing.unit,marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:3*e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(p.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(p.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(p.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})(G),Y=(n(348),n(208)),H=n.n(Y),K=n(209),J=n(210),q=function(e){return console.log.bind(console,e)},Z=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e,t){var a=e.formData;console.log("Data submitted: ",a),n.props.onNextStep(a)},console.log(e),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(H.a,{schema:K,uiSchema:J,onChange:q("changed"),onSubmit:this.onSubmit,onError:q("errors")})}}]),t}(a.Component),$=n(211),Q=n.n($),X=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){console.log("Payment received by token: ",e),n.props.onPaymentReceived()},n.onClosed=function(){console.log("Payment checkout closed: "),n.props.onPaymentReceived()},console.log("TakeMoney"),console.log(e),n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return o.a.createElement(Q.a,{token:this.onSubmit,opened:this.onOpened,closed:this.onClosed,stripeKey:"pk_test_wmvBYxueVozMD9rDbncXxzIY00ep3OGJ2T",name:"TVM",description:"Premium insurance",image:"https://www.tvm.nl/sites/tvm.nl/files/Vignet-TVM%2C-PMS-355.jpg",ComponentClass:"div",panelLabel:"Pay for Premium",amount:this.props.price,currency:"EUR",locale:"en",email:"super@ferrari.co",shippingAddress:!1,billingAddress:!1,zipCode:!1,alipay:!0,bitcoin:!0,allowRememberMe:!0,reconfigureOnUpdate:!1},o.a.createElement("button",{className:"btn btn-primary"},"Checkout"))}}]),t}(o.a.Component),ee=n(212),te=n.n(ee),ne=n(127),ae=n.n(ne),oe=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).onNewInsurance=function(){n.setState({uiState:"INSURE",isTakingTooLong:!1})},n.onHistory=function(){n.setState({uiState:"HISTORY"})},n.onNewClaim=function(e){n.setState({uiState:"CLAIM",contractId:e})},n.onSteteChange=function(e){n.setState({uiState:e,isTakingTooLong:!1})},n.onApiCallFailed=function(e){console.log("onApiCallFailed"),n.setState({uiState:"REST_FAIL",failReason:e})},n.onFormFilled=function(e){console.log("onFormFilled"),console.log(n.state),n.setState({uiState:"PAYMENT_LOADING",loadingTitle:"Pricing your Premium insurace",filledFormData:e}),fetch("https://r0xsanekn1.execute-api.us-east-1.amazonaws.com/dev/get_premium/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.ok?(console.log("response OK"),e.json()):(console.log("response NOK"),n.onApiCallFailed("".concat(e.status," - ").concat(e.statusText)),e.json())}).then(function(e){console.log("received data from API"),e.hasOwnProperty("zones")&&(console.log(e.zones),n.onPremiumReceived(e.premium.price,e.zones,e.premium.policy_draft_pdf))}),setTimeout(function(){return n.onTakingTooLong()},5e3)},n.onPremiumReceived=function(e,t,a){console.log("onPremiumReceived"),console.log(n.state),n.setState({uiState:"PAY",price:e,alarmZones:t,policyDraftPdf:a})},n.onPaymentReceived=function(){console.log("onPaymentReceived"),console.log(n.state),n.setState({uiState:"CONTRACT_LOADING",loadingTitle:"Creating the Premium contract"}),fetch("https://r0xsanekn1.execute-api.us-east-1.amazonaws.com/dev/pay_premium/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({paymentOK:!0})}).then(function(e){return e.ok?(console.log("response OK"),e.json()):(console.log("response NOK"),n.onApiCallFailed("".concat(e.status," - ").concat(e.statusText)),null)}).then(function(e){e.hasOwnProperty("policy")&&(console.log("We are in business, ".concat(e)),n.onPolicyReceived(e.policy.bill_of_lading_pdf,e.policy.policy_pdf,e.contract_address,e.contract_page,e.trigger_claim_address))}),setTimeout(n.onTakingTooLong(),5e3)},n.onPolicyReceived=function(e,t,a,o,i){console.log("onPolicyReceived"),console.log(n.state),n.setState({uiState:"REVIEW",bolPdf:e,policyContractPdf:t,contractId:a,contractPage:o,triggerClaimPage:i})},n.onUserChange=function(e){n.setState({loggedUser:e})},n.onTakingTooLong=function(){console.log("onTakingTooLong"),n.state.uiState.includes("LOADING")&&n.setState({isTakingTooLong:!0})},n.renderRetryButton=function(){if(console.log("renderRetryButton"),n.state.isTakingTooLong)return console.log("renderRetryButton -- isTakingTooLong"),o.a.createElement("div",{className:"App-contents App-button "},o.a.createElement("div",{className:"btn btn-primary",onClick:n.onNewInsurance},"Try again"))},n.state=n.getLocalState()||{uiState:"INSURE",filledFormData:{},price:777,loadingTitle:"Preparing the good stuff",alarmZones:[],bolPdf:"/dummy.pdf",policyContractPdf:"/dummy.pdf",policyDraftPdf:"/dummy.pdf",contractId:"0x00",contractPage:"https://google.com",triggerClaimPage:"https://google.com",failReason:"Check your internet connection.",loggedUser:"The Consigner",isTakingTooLong:!1,dummyDataFromAPI:{zones:[{max:{temperature:270,time:4294967295},min:{temperature:0,time:4294967295}},{max:{humidity:100,time:4294967295},min:{humidity:85,time:2}},{max:{optical_power:1500,time:4294967295},min:{optical_power:0,time:5}},{max:{optical_power:1e7,time:4294967295},min:{optical_power:1e5,time:5}}],premium:{TBD:"TBD"},bill_of_lading_pdf:"https://www.upsfreight.com/downloads/UPGF_VICS_BOL_Form.pdf",insurance_contract_pdf:"https://www.sungeneral.net/images/policies/money-insurance/SPECIMEN-Grenada-Money-Insurance.pdf",request:{type:"Buffer",data:[123,34,115,101,110,100,101,114,34,58,34,68,72,76,32,73,110,116,101,114,110,97,116,105,111,110,97,108,32,71,109,98,72,34,125]}}},n}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;if(console.log("App render state -- saving"),console.log(this.state),this.saveLocalState(),"TVM"==this.state.loggedUser)return o.a.createElement("div",{className:"App"},this.renderNavbar());switch(this.state.uiState){case"REST_FAIL":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents App-button ",id:"contract-review"},o.a.createElement("div",{className:"panel panel-info"},o.a.createElement("h5",null,"Communication failed :"),o.a.createElement("p",null," ",this.state.failReason),o.a.createElement("a",{href:this.onNewInsurance,target:"_blank",className:"btn btn-secondary"},"Restart"))));case"INSURE":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents",id:"bol-form"},o.a.createElement(Z,{onNextStep:this.onFormFilled})),o.a.createElement("div",{className:"App-contents",id:"checkout"}));case"PAY":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents",id:"payment-review"},o.a.createElement("h4",null,"Premium for you"),o.a.createElement("p",null,"Premium conditions will be shown here ... in table maybe"),o.a.createElement("p",null,this.state.zones),o.a.createElement(X,{onPaymentReceived:this.onPaymentReceived,price:this.state.price})));case"REVIEW":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents App-button ",id:"contract-review"},o.a.createElement("div",{className:"panel panel-info"},o.a.createElement("h5",null,"Contract : ",this.state.contractId),o.a.createElement("p",null,"Contract information has been save in your profile history."),o.a.createElement("p",null,"Save the documents otherwise you wont be able to claim insurance!"),o.a.createElement("a",{href:this.state.contractPage,target:"_blank",className:"btn btn-secondary"},"Contract state"),o.a.createElement("a",{href:this.state.triggerClaimPage,target:"_blank",className:"btn btn-secondary"},"Instant Smart COntract Trigger claim"),o.a.createElement("a",{href:function(){return e.onNewClaim(e.state.contractId)},target:"_blank",className:"btn btn-secondary"},"Trigger claim")),o.a.createElement("a",{href:this.state.bolPdf,target:"_blank",className:"btn btn-secondary"},"Bill of Lading"),o.a.createElement("a",{href:this.state.policyContractPdf,target:"_blank",className:"btn btn-danger"},"Legal Contract")));case"HISTORY":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents App-button ",id:"contract-review"},"previous insurance list"));case"CLAIM":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents App-button ",id:"contract-review"},o.a.createElement("h5",null,"Contract : ",this.state.contractId),"claiming that the item has been stole .. or something simmilar "));default:return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-loading"},o.a.createElement(te.a,{type:"spin",color:"#ffffff",height:"20%",width:"20%"})),o.a.createElement("div",{className:"App-loading"},o.a.createElement("h4",null,this.state.loadingTitle)),this.renderRetryButton())}}},{key:"saveLocalState",value:function(){ae.a.set("app-state",this.state)}},{key:"getLocalState",value:function(){ae.a.get("app-state")}},{key:"renderNavbar",value:function(){return o.a.createElement(W,{userName:this.state.loggedUser,onUserChange:this.changeUser,onStateChange:this.onUiStateChange})}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(oe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[213,1,2]]]);
//# sourceMappingURL=main.e6b95b8b.chunk.js.map