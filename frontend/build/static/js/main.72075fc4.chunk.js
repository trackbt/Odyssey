(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{209:function(e){e.exports={title:"Bill of Lading",description:"Your premium will be calculated from cargo description",type:"object",required:["Sender","Receiver","Carrier","fromCountry","fromPlace","toCountry","toPlace"],definitions:{Address:{type:"object",properties:{name:{type:"string",default:""},address:{type:"string",default:""},country:{type:"string",default:""}}},CargoCategory:{type:"string",enum:["Car","Cargo","Ship","Plant","Plane","Transport"]},GoodsType:{type:"string",enum:["CONTAINER","LIQUID","DRY","BREAKBULK","RORO"]},GoodsStatus:{type:"string",enum:["OK","DAMAGED","LOST"]},Country:{type:"string",enum:["Austria","Belgium","Bulgaria","Croatia","Cyprus","Czech Republic","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Ireland","Italy","Latvia","Luxembourg","Lithuania","Malta","Netherlands","Poland","Portugal","Romania","Slovak Republic","Slovenia","Spain","Sweden","United Kingdom"]},CountryIso:{type:"string",enum:["AT","BE","BG","CY","CZ","DE","DK","EE","ES","FI","FR","GB","GR","HR","HU","IE","IT","LT","LU","LV","MT","NL","PL","PT","RO","SE","SI","SK"]},TransportRoute:{type:"object",properties:{SequenceNr:{type:"number",title:"Seq. No.",default:0},FromCountry:{type:"string",title:"Delivery address",default:"NL"},FromPlace:{type:"string",title:"Delivery address",default:"Energieweg 10, 9743 AN Groningen"},ToCountry:{type:"string",title:"Delivery address",default:"NL"},ToPlace:{type:"string",title:"Delivery address",default:"Noord Brabantlaan 1A, 5652 LA Eindhoven"}}},PaymentStatus:{type:"string",enum:["PENDING","PAYED","CANCELLED"]},Package:{type:"object",properties:{GoodsID:{type:"string",title:"Identifier",default:"package-F488PS"},GoodsType:{title:"Type",default:"RORO",$ref:"#/definitions/GoodsType"},Description:{type:"string",title:"Description",default:"2018 Ferrari 488 Pista Spider WH"},Value:{type:"number",title:"Value (EUR)",default:32e4},Quantity:{type:"number",title:"Quantity (pcs)",default:1},Weight:{type:"number",title:"Weight (kg)",default:1380},Status:{title:"Status",default:"OK",$ref:"#/definitions/GoodsStatus"}}}},properties:{BillOfLadingID:{type:"string",title:"Package ID / BillOfLadingID",default:"DummyPackageID_3216546"},Sender:{type:"string",title:"Consigner / Sender",default:"DutchChain"},fromPlace:{type:"string",title:"Delivery address",default:"Energieweg 10, 9743 AN Groningen"},fromCountry:{title:"Origin country (ISO)",default:"NL",$ref:"#/definitions/CountryIso"},Receiver:{type:"string",title:"Consignee / Recipient",default:"Formula One World Championship Limited"},toPlace:{type:"string",title:"Delivery address",default:"Noord Brabantlaan 1A, 5652 LA Eindhoven"},toCountry:{title:"Delivery country (ISO)",default:"NL",$ref:"#/definitions/CountryIso"},Carrier:{type:"string",title:"Carrier",default:"DHL International GmbH"},Goods:{type:"array",title:"List of Goods",minItems:1,items:{$ref:"#/definitions/Package"},files:{type:"array",title:"Additional files",items:{type:"string",format:"data-url"}}},TransportRoutes:{type:"array",title:"Transport Routes / Legs",minItems:1,items:{$ref:"#/definitions/TransportRoute"},files:{type:"array",title:"Additional files",items:{type:"string",format:"data-url"}}}}}},210:function(e){e.exports={"ui:field":"layout","ui:layout":[{Sender:{md:6},FromCountry:{md:6},FromPlace:{md:12}},{Receiver:{md:6},ToCountry:{md:6},ToPlace:{md:12}},{goods:12}],sender:{"ui:autofocus":!0,"ui:emptyValue":""},receiver:{"ui:emptyValue":""},fromCountry:{"ui:emptyValue":""},fromPlace:{"ui:emptyValue":""},toCountry:{"ui:emptyValue":""},toPlace:{"ui:emptyValue":""},Goods:{items:{classNames:"goods-items-list","ui:emptyValue":"","ui:options":{removable:!0,addable:!0,orderable:!0}}},TransportRoutes:{items:{classNames:"goods-items-list","ui:emptyValue":"","ui:options":{removable:!0,addable:!0,orderable:!0}}}}},211:function(e){e.exports={title:"Trigger Claim",description:"Please state your claim filling in this form. More details help us solve your issue sooner.",type:"object",required:[],definitions:{ClaimType:{type:"string",enum:["Delayed","Stolen","Minor damage","Major damage","Total loss"]},Attachment:{type:"object",properties:{name:{type:"string",title:"Name",default:"Photo of flooded damage"},url:{title:"Url",type:"string",default:"/::fileSystem/DCIM/camera/12549873.jpg"},description:{type:"string",title:"Description",default:"Car has flooded carpet"}}}},properties:{PolicyID:{type:"string",title:"Insurance Policy Id",default:"some policy id"},ClaimType:{title:"Claim type",type:"string",default:"Total loss",$ref:"#/definitions/ClaimType"},Description:{type:"string",title:"Claim description",default:"We`ve received flooded goods. For us it is a total loss, please take it into account and solve this promptly."},Attachments:{type:"array",title:"Attached files",minItems:0,items:{$ref:"#/definitions/Attachment"},files:{type:"array",title:"Additional files",items:{type:"string",format:"data-url"}}}}}},212:function(e){e.exports={"ui:field":"layout","ui:layout":[{sender:{md:6},fromCountry:{md:6},fromPlace:{md:12}},{receiver:{md:6},toCountry:{md:6},toPlace:{md:12}},{goods:12}],sender:{"ui:autofocus":!0,"ui:emptyValue":""},receiver:{"ui:emptyValue":""},fromCountry:{"ui:emptyValue":""},fromPlace:{"ui:emptyValue":""},toCountry:{"ui:emptyValue":""},toPlace:{"ui:emptyValue":""},Attachments:{items:{classNames:"goods-items-list","ui:emptyValue":"","ui:options":{removable:!0,addable:!0,orderable:!0}}}}},215:function(e,t,a){e.exports=a(504)},220:function(e,t,a){},221:function(e,t,a){},350:function(e,t,a){},501:function(e,t,a){},504:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),i=a(23),r=a.n(i),l=(a(220),a(26)),s=a(27),c=a(29),u=a(28),m=a(30),d=(a(221),a(53)),p=a(201),g=a.n(p),h=a(202),f=a.n(h),y=a(33),b=a.n(y),E=a(204),v=a.n(E),C=a(206),N=a.n(C),S=a(68),P=a.n(S),O=a(54),T=a.n(O),A=a(124),I=a.n(A),w=a(67),k=a(208),R=a(203),L=a.n(R),D=a(205),M=a.n(D),j=a(127),_=a.n(j),B=a(125),F=a.n(B),x=a(126),G=a.n(x),U=a(207),V=a.n(U),z=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleMenuSelected=function(e){switch(e){case"INSURE":break;default:a.handleMenuSelected("INSURE")}},a.handleUserChange=function(){},a.handleProfileMenuOpen=function(e){a.setState({anchorEl:e.currentTarget})},a.handleMenuClose=function(){a.setState({anchorEl:null}),a.handleMobileMenuClose()},a.handleMobileMenuOpen=function(e){a.setState({mobileMoreAnchorEl:e.currentTarget})},a.handleMobileMenuClose=function(){a.setState({mobileMoreAnchorEl:null})},console.log(e),a.state={anchorEl:null,mobileMoreAnchorEl:null,userName:e.userName,onUserChange:e.onUserChange,onMenuSelected:e.onUiStateChange},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.state,t=e.anchorEl,a=e.mobileMoreAnchorEl,n=this.props.classes,i=Boolean(t),r=Boolean(a),l=o.a.createElement(I.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:this.handleMenuClose},o.a.createElement(T.a,{onClick:this.handleMenuClose},"Profile"),o.a.createElement(T.a,{onClick:this.handleMenuClose},"My account")),s=o.a.createElement(I.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:r,onClose:this.handleMenuClose},o.a.createElement(T.a,{onClick:this.handleMobileMenuClose},o.a.createElement(b.a,{color:"inherit"},o.a.createElement(P.a,{badgeContent:4,color:"secondary"},o.a.createElement(F.a,null))),o.a.createElement("p",null,"Messages")),o.a.createElement(T.a,{onClick:this.handleMobileMenuClose},o.a.createElement(b.a,{color:"inherit"},o.a.createElement(P.a,{badgeContent:11,color:"secondary"},o.a.createElement(G.a,null))),o.a.createElement("p",null,"Notifications")),o.a.createElement(T.a,{onClick:this.handleProfileMenuOpen},o.a.createElement(b.a,{color:"inherit"},o.a.createElement(_.a,null)),o.a.createElement("p",null,"Profile")));return o.a.createElement("div",{className:n.root},o.a.createElement(g.a,{position:"static"},o.a.createElement(f.a,null,o.a.createElement(b.a,{className:n.menuButton,color:"inherit","aria-label":"Open drawer"},o.a.createElement(L.a,null)),o.a.createElement(v.a,{className:n.title,variant:"h6",color:"inherit",noWrap:!0},"Insurance Dashboard"),o.a.createElement("div",{className:n.search},o.a.createElement("div",{className:n.searchIcon},o.a.createElement(M.a,null)),o.a.createElement(N.a,{placeholder:"Search\u2026",classes:{root:n.inputRoot,input:n.inputInput}})),o.a.createElement("div",{className:n.grow}),o.a.createElement("div",{className:n.sectionDesktop},o.a.createElement(b.a,{color:"inherit"},o.a.createElement(P.a,{badgeContent:4,color:"secondary"},o.a.createElement(F.a,null))),o.a.createElement(b.a,{color:"inherit"},o.a.createElement(P.a,{badgeContent:17,color:"secondary"},o.a.createElement(G.a,null))),o.a.createElement(b.a,{"aria-owns":i?"material-appbar":void 0,"aria-haspopup":"true",onClick:this.handleProfileMenuOpen,color:"inherit"},o.a.createElement(_.a,null))),o.a.createElement("div",{className:n.sectionMobile},o.a.createElement(b.a,{"aria-haspopup":"true",onClick:this.handleMobileMenuOpen,color:"inherit"},o.a.createElement(V.a,null))))),l,s)}}]),t}(o.a.Component),K=Object(k.withStyles)(function(e){return{root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(d.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(d.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(w.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(w.fade)(e.palette.common.white,.25)},marginRight:2*e.spacing.unit,marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:3*e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(d.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(d.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(d.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"})}})(z),W=(a(350),a(82)),Y=a.n(W),H=a(209),$=a(210),q=function(e){return console.log.bind(console,e)},J=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e,t){var n=e.formData;n.PaymentStatus="PENDING",console.log("Data submitted: ",n),a.props.onNextStep(n)},console.log(e),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(Y.a,{schema:H,uiSchema:$,onChange:q("changed"),onSubmit:this.onSubmit,onError:q("errors")})}}]),t}(n.Component),Q=(a(501),a(211)),Z=a(212),X=function(e){return console.log.bind(console,e)},ee=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e,t){var n=e.formData;console.log("Claim submitted: ",n),a.props.onNextStep(n)},console.log(e),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(Y.a,{schema:Q,uiSchema:Z,onChange:X("changed"),onSubmit:this.onSubmit,onError:X("errors")})}}]),t}(n.Component),te=a(213),ae=a.n(te),ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onSubmit=function(e){console.log("Payment received by token: ",e),a.props.onPaymentReceived()},a.onClosed=function(){console.log("Payment checkout closed: "),a.props.onPaymentReceived()},console.log("TakeMoney"),console.log(e),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(ae.a,{token:this.onSubmit,opened:this.onOpened,closed:this.onClosed,stripeKey:"pk_test_wmvBYxueVozMD9rDbncXxzIY00ep3OGJ2T",name:"TVM",description:"Premium insurance",image:"https://www.tvm.nl/sites/tvm.nl/files/Vignet-TVM%2C-PMS-355.jpg",ComponentClass:"div",panelLabel:"Pay for Premium",amount:this.props.price,currency:"EUR",locale:"en",email:"super@ferrari.co",shippingAddress:!1,billingAddress:!1,zipCode:!1,alipay:!0,bitcoin:!0,allowRememberMe:!0,reconfigureOnUpdate:!1},o.a.createElement("button",{className:"btn btn-primary"},"Checkout"))}}]),t}(o.a.Component),oe=a(214),ie=a.n(oe),re=a(128),le=a.n(re),se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).onNewInsurance=function(){a.setState({uiState:"INSURE",isTakingTooLong:!1})},a.onHistory=function(){a.setState({uiState:"HISTORY"})},a.onNewClaim=function(e){a.setState({uiState:"CLAIM",contractId:e})},a.onSteteChange=function(e){a.setState({uiState:e,isTakingTooLong:!1})},a.onApiCallFailed=function(e){console.log("onApiCallFailed"),a.setState({uiState:"REST_FAIL",failReason:e})},a.onBolFormFilled=function(e){console.log("onBolFormFilled"),console.log(a.state),a.setState({uiState:"PAYMENT_LOADING",loadingTitle:"Pricing your Premium insurace",filledFormData:e}),fetch(a.state.api_urls.get_premium,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e)}).then(function(e){return e.ok?(console.log("response OK"),e.json()):(console.log("response NOK"),a.onApiCallFailed("".concat(e.status," - ").concat(e.statusText)),e.json())}).then(function(e){console.log("received data from TVM API"),e.hasOwnProperty("zones")&&(console.log(e.zones),a.onPremiumReceived(e.premium.price,e.zones,e.premium.policy_draft_pdf))}),setTimeout(function(){return a.onTakingTooLong()},5e3)},a.onPremiumReceived=function(e,t,n){console.log("onPremiumReceived"),console.log(a.state),a.setState({uiState:"PAY",price:e,alarmZones:t,policyDraftPdf:n})},a.onPaymentReceived=function(){console.log("onPaymentReceived"),console.log(a.state),a.setState({uiState:"CONTRACT_LOADING",loadingTitle:"Creating the Premium contract"}),fetch(a.state.api_urls.pay_premium,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({paymentOK:!0})}).then(function(e){return e.ok?(console.log("response OK"),e.json()):(console.log("response NOK"),a.onApiCallFailed("".concat(e.status," - ").concat(e.statusText)),null)}).then(function(e){e.hasOwnProperty("policy")&&(console.log("We are in business, ".concat(e)),a.onPolicyReceived(e.policy.bill_of_lading_pdf,e.policy.policy_pdf,e.contract_address,e.contract_page,e.trigger_claim_address))}),setTimeout(a.onTakingTooLong(),5e3)},a.onPolicyReceived=function(e,t,n,o,i){console.log("onPolicyReceived"),console.log(a.state),a.setState({uiState:"REVIEW",bolPdf:e,policyContractPdf:t,contractId:n,contractPage:o,triggerClaimPage:i})},a.onUserChange=function(e){a.setState({loggedUser:e})},a.onTakingTooLong=function(){console.log("onTakingTooLong"),a.state.uiState.includes("LOADING")&&a.setState({isTakingTooLong:!0})},a.renderRetryButton=function(){if(console.log("renderRetryButton"),a.state.isTakingTooLong)return console.log("renderRetryButton -- isTakingTooLong"),o.a.createElement("div",{className:"App-contents App-button "},o.a.createElement("div",{className:"btn btn-primary",onClick:a.onNewInsurance},"Try again"))},a.state=a.getLocalState()||{uiState:"INSURE",filledFormData:{},price:777,loadingTitle:"Preparing the good stuff",alarmZones:[],bolPdf:"/dummy.pdf",policyContractPdf:"/dummy.pdf",policyDraftPdf:"/dummy.pdf",contractId:"0x00",contractPage:"https://google.com",triggerClaimPage:"https://google.com",failReason:"Check your internet connection.",loggedUser:"The Consigner",isTakingTooLong:!1,api_urls:{get_premium:"https://r0xsanekn1.execute-api.us-east-1.amazonaws.com/dev/get_premium/",pay_premium:"https://r0xsanekn1.execute-api.us-east-1.amazonaws.com/dev/pay_premium/"},dummyDataFromAPI:{zones:[{max:{temperature:270,time:4294967295},min:{temperature:0,time:4294967295}},{max:{humidity:100,time:4294967295},min:{humidity:85,time:2}},{max:{optical_power:1500,time:4294967295},min:{optical_power:0,time:5}},{max:{optical_power:1e7,time:4294967295},min:{optical_power:1e5,time:5}}],premium:{TBD:"TBD"},bill_of_lading_pdf:"https://www.upsfreight.com/downloads/UPGF_VICS_BOL_Form.pdf",insurance_contract_pdf:"https://www.sungeneral.net/images/policies/money-insurance/SPECIMEN-Grenada-Money-Insurance.pdf",request:{type:"Buffer",data:[123,34,115,101,110,100,101,114,34,58,34,68,72,76,32,73,110,116,101,114,110,97,116,105,111,110,97,108,32,71,109,98,72,34,125]}}},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this;if(console.log("App render state -- saving"),console.log(this.state),this.saveLocalState(),"TVM"===this.state.loggedUser)return o.a.createElement("div",{className:"App"},this.renderNavbar());switch(this.state.uiState){case"REST_FAIL":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents App-button ",id:"contract-review"},o.a.createElement("div",{className:"panel panel-info"},o.a.createElement("h5",null,"Communication failed :"),o.a.createElement("p",null," ",this.state.failReason),o.a.createElement("a",{href:this.onNewInsurance,target:"_blank",className:"btn btn-secondary"},"Restart"))));case"INSURE":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents",id:"bol-form"},o.a.createElement(J,{onNextStep:this.onBolFormFilled})),o.a.createElement("div",{className:"App-contents",id:"checkout"}));case"PAY":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents",id:"payment-review"},o.a.createElement("h4",null,"Premium for you"),o.a.createElement("p",null,"Premium conditions will be shown here ... in table maybe"),o.a.createElement("p",null,this.state.zones),o.a.createElement(ne,{onPaymentReceived:this.onPaymentReceived,price:this.state.price})));case"REVIEW":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents App-button ",id:"contract-review"},o.a.createElement("div",{className:"panel panel-info"},o.a.createElement("h5",null,"Contract : ",this.state.contractId),o.a.createElement("p",null,"Contract information has been save in your profile history."),o.a.createElement("p",null,"Save the documents otherwise you wont be able to claim insurance!"),o.a.createElement("a",{href:this.state.contractPage,target:"_blank",className:"btn btn-secondary"},"Contract state"),o.a.createElement("a",{href:this.state.triggerClaimPage,target:"_blank",className:"btn btn-secondary"},"Trigger claim contract"),o.a.createElement("a",{href:function(){return e.onNewClaim(e.state.contractId)},target:"_blank",className:"btn btn-secondary"},"Trigger claim")),o.a.createElement("a",{href:this.state.bolPdf,target:"_blank",className:"btn btn-secondary"},"Bill of Lading"),o.a.createElement("a",{href:this.state.policyContractPdf,target:"_blank",className:"btn btn-danger"},"Legal Contract")));case"HISTORY":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents App-button ",id:"contract-review"},"previous insurance list"));case"CLAIM":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents",id:"claim-form"},o.a.createElement(ee,{onNextStep:this.onClaimFormFilled,contractId:this.state.contractId})));case"CLAIM_DONE":return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-contents App-button ",id:"contract-review"},o.a.createElement("h5",null,"Contract : ",this.state.contractId),"claiming that the item has been stole .. or something simmilar "));default:return o.a.createElement("div",{className:"App"},this.renderNavbar(),o.a.createElement("div",{className:"App-loading"},o.a.createElement(ie.a,{type:"spin",color:"#ffffff",height:"20%",width:"20%"})),o.a.createElement("div",{className:"App-loading"},o.a.createElement("h4",null,this.state.loadingTitle)),this.renderRetryButton())}}},{key:"saveLocalState",value:function(){le.a.set("app-state",this.state)}},{key:"getLocalState",value:function(){le.a.get("app-state")}},{key:"renderNavbar",value:function(){return o.a.createElement(K,{userName:this.state.loggedUser,onUserChange:this.changeUser,onStateChange:this.onUiStateChange})}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[215,1,2]]]);
//# sourceMappingURL=main.72075fc4.chunk.js.map